<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>【笔记】Anka学习笔记 | 绯鞠的博客 | 连蜜统治世界!!!💕</title>

  
  <meta name="author" content="绯鞠">
  

  
  <meta name="description" content="捕捉一只爱折腾的绯鞠">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="【笔记】Anka学习笔记"/>

  <meta property="og:site_name" content="绯鞠的博客"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="绯鞠的博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">绯鞠的博客</a>
    </h1>
    <p class="site-description">连蜜统治世界!!!💕</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/about/">关于</a></li>
      
        <li><a href="/tags/">标签</a></li>
      
        <li><a href="/categories/">分类</a></li>
      
        <li><a href="/archives/">归档</a></li>
      
        <li><a href="/links/">友链</a></li>
      
        <li><a href="/reward/">赞助</a></li>
      
        <li><a href="/atom.xml">订阅</a></li>
      
        <li><a target="_blank" rel="noopener" href="//stellar.loli.fj.cn">主题</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>【笔记】Anka学习笔记</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2022/11/24/Anka学习笔记/" rel="bookmark">
        <time class="entry-date published" datetime="2022-11-24T08:32:08.000Z">
          2022-11-24
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Anka is a suite of software for creating and managing macOS VMs to run on top of Apple hardware and macOS. It enables creation of macOS VMs and integrates with existing container based DevOps workflows for iOS and Native App build &amp; test CI&#x2F;CD&#x2F;Automation. Built on the native Apple hypervisor, it utilizes macOS resource scheduling, performance management, and flexibility. Management of VMs is performed with the Anka Virtualization CLI, UI app, and Build Cloud Controller UI or REST APIs.（<a href="/302.html?target=https://docs.veertu.com/anka/what-is-anka/">官网</a>）</p>
<span id="more"></span>

<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li><p><code>.ipsw</code>系统安装包文件：<a target="_blank" rel="noopener" href="https://ipsw.me/">https://ipsw.me</a></p>
</li>
<li><p>如果是在12.x的MacOS上安装13.x的MacOS虚拟机，需要准备Xcode环境</p>
</li>
<li><p>安装完Xcode后需要同意协议并安装驱动</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo xcodebuild -license accept</span><br><span class="line">sudo xcodebuild -runFirstLaunch</span><br><span class="line">for PKG in $(/bin/ls /Applications/Xcode.app/Contents/Resources/Packages/*.pkg); do</span><br><span class="line">    sudo /usr/sbin/installer -pkg &quot;$PKG&quot; -target /</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="安装Anka"><a href="#安装Anka" class="headerlink" title="安装Anka"></a>安装Anka</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FULL_FILE_NAME=&quot;$(curl -Ls -r 0-1 -o /dev/null -w %&#123;url_effective&#125; https://veertu.com/downloads/anka-virtualization-apple | cut -d/ -f5)&quot;</span><br><span class="line">curl -S -L -o ./$FULL_FILE_NAME https://veertu.com/downloads/anka-virtualization-apple</span><br><span class="line">sudo installer -pkg $FULL_FILE_NAME -tgt /</span><br></pre></td></tr></table></figure>

<h2 id="同意许可协议"><a href="#同意许可协议" class="headerlink" title="同意许可协议"></a>同意许可协议</h2><ul>
<li>如果是<code>Anka Build</code>或<code>Anka Flow</code>需要同意许可协议</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo anka license accept-eula</span><br></pre></td></tr></table></figure>

<h2 id="创建虚拟机"><a href="#创建虚拟机" class="headerlink" title="创建虚拟机"></a>创建虚拟机</h2><blockquote>
<p><code>-c 4</code>：指定虚拟机CPU核心数，缺省值为4，推荐3个及以上<br><code>-m 4G</code>：指定虚拟机内存大小，缺省值为4G。单位为：<code>K</code>、<code>M</code>、<code>G</code>、<code>T</code><br><code>-d 128G</code>：指定虚拟机硬盘大小，缺省值为128G。单位为：<code>K</code>、<code>M</code>、<code>G</code>、<code>T</code></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka create -a latest &lt;name&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>等待虚拟机创建完成</li>
</ul>
<h2 id="启动虚拟机"><a href="#启动虚拟机" class="headerlink" title="启动虚拟机"></a>启动虚拟机</h2><blockquote>
<p><code>&lt;name&gt;</code>：指定虚拟机名称</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka start -uv &lt;name&gt;</span><br></pre></td></tr></table></figure>

<h2 id="查看Anka版本"><a href="#查看Anka版本" class="headerlink" title="查看Anka版本"></a>查看Anka版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka version</span><br></pre></td></tr></table></figure>

<h2 id="查看可以安装的系统版本"><a href="#查看可以安装的系统版本" class="headerlink" title="查看可以安装的系统版本"></a>查看可以安装的系统版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka create -l</span><br></pre></td></tr></table></figure>

<h2 id="查看虚拟机文件位置"><a href="#查看虚拟机文件位置" class="headerlink" title="查看虚拟机文件位置"></a>查看虚拟机文件位置</h2><ul>
<li>系统镜像包默认的下载位置为<code>~/Library/Application Support/Veertu/Anka/img_lib</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka config img_lib_dir</span><br></pre></td></tr></table></figure>

<h2 id="删除虚拟机文件"><a href="#删除虚拟机文件" class="headerlink" title="删除虚拟机文件"></a>删除虚拟机文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka delete --cache</span><br></pre></td></tr></table></figure>

<h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://prinsss.github.io/macos-vm-on-m1-mac/">PRIN BLOG</a><br><a target="_blank" rel="noopener" href="https://docs.veertu.com/anka/apple/">VeertuAnka官方文档</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>

  









    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2024 绯鞠
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>